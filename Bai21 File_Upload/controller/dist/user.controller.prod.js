"use strict";var db=require("../db"),shortid=require("shortid");module.exports.index=function(e,r){r.render("users/index",{users:db.get("users").value()})},module.exports.view=function(e,r){var s=e.params.id,d=db.get("users").find({id:s}).value();r.render("users/user",{user:d})},module.exports.search=function(e,r){var s=e.query.keyword,d=db.get("users").filter(function(e){return-1!==e.content.toLowerCase().indexOf(s.toLowerCase())}).value();r.render("users/index",{users:d,keyword:s})},module.exports.createGet=function(e,r){r.render("users/create")},module.exports.createPost=function(e,r){e.body.id=shortid.generate();var s=[];e.body.name||s.push("Name is required."),e.body.phone||s.push("Phone is required."),s.length?r.render("users/create",{errors:s,values:e.body}):(db.get("users").push(e.body).write(),r.redirect("/users"))},module.exports.delete=function(e,r){var s=e.params.id;db.get("users").remove({id:s}).write(),r.redirect("/users")};